<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FreshersHub</title>
  <style>
    /* ================================
       GLOBAL STYLES
    ================================== */
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to bottom right, rgba(0, 114, 255, 0.6), rgba(0, 198, 255, 0.6)),
        url('https://images.unsplash.com/photo-1519389950473-47ba0277781c?fit=crop&w=1650&q=80') no-repeat center center;
      background-size: cover;
      background-attachment: fixed;
      color: white;
    }

    .container {
      max-width: 400px;
      margin: 5% auto;
      padding: 2rem;
      background: rgba(0, 0, 0, 0.7);
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
    }

    h2 { text-align: center; margin-bottom: 1.5rem; }

    input, select, button {
      width: 100%; padding: 12px; margin: 8px 0;
      border: none; border-radius: 8px; font-size: 1rem;
    }

    button { background-color: #00c6ff; color: white; cursor: pointer; }
    button:hover { background-color: #1c78e9; }

    table {
      width: 100%; border-collapse: collapse; border-radius: 10px; overflow: hidden;
      table-layout: fixed; background: white; color: black;
    }

    thead { background-color: #007bff; color: white; }
    th, td { padding: 12px; text-align: center; border: 1px solid #ddd; word-wrap: break-word; }

    /* ================================
       DASHBOARD MENU ICONS + SIDE MENUS
    ================================== */
    #adminMenuBtn, #fresherMenuBtn, #companyMenuBtn {
      position: fixed; top: 20px; left: 20px;
      font-size: 28px; cursor: pointer; z-index: 1001;
      display: none; /* Hidden by default */
    }

    .sideMenu {
      position: fixed; top: 0; left: -250px;
      width: 250px; height: 100%;
      background: rgba(0,0,0,0.8);
      color: white; padding-top: 60px;
      transition: transform 0.3s ease; z-index: 1000;
    }
    .sideMenu.open { transform: translateX(250px); }

    .sideMenu a {
      display: block; color: white; padding: 12px;
      text-decoration: none; font-size: 18px;
    }
    .sideMenu a:hover { background: rgba(255,255,255,0.1); }

    .overlay {
      position: fixed; top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.4);
      z-index: 999; display: none;
    }
    .overlay.show { display: block; }

    /* Color tweak for toggle link */
    #toggle-text a { color: #ffcc00; text-decoration: underline; font-weight: bold; }
  </style>
</head>
<body>

  <!-- ================================
       LOGIN/SIGNUP FORM
  ================================== -->
  <div class="container" id="auth-section">
    <h2 id="form-title">FreshersHub - Signup</h2>
    <input type="email" id="email" placeholder="Email" required />
    <input type="password" id="password" placeholder="Password" required />
    <select id="role">
      <option value="fresher">Fresher</option>
      <option value="company">Company</option>
      <option value="admin">Admin</option>
    </select>
    <button id="actionBtn" onclick="signup()">Signup</button>
    <p id="toggle-text">Already have an account? <a href="#" id="toggleLink">Login here</a></p>
  </div>

  <!-- ================================
       ADMIN DASHBOARD
  ================================== -->
  <div id="adminDashboard" style="display:none; padding:20px;">
    <div id="adminMenuBtn" onclick="toggleAdminMenu()">‚ò∞</div>
    <div class="sideMenu" id="adminSideMenu">
      <a href="#" id="adminMenuHome">Dashboard</a>
      <a href="#" id="adminMenuUsers">Manage Users</a>
      <a href="#" id="adminMenuJobs">Manage Jobs</a>
      <a href="#" id="adminMenuSettings">Settings</a>
      <a href="#" onclick="logout()">Logout</a>
    </div>
    <div class="overlay" id="adminOverlay" onclick="toggleAdminMenu()"></div>

    <h2>Admin Dashboard</h2>
    <!-- Quick Stats -->
    <div style="display:flex; gap:20px; justify-content:center;">
      <div style="background: #007bff; padding:20px; border-radius:10px; width:150px;">
        <p>Total Freshers:</p><h3 id="totalFreshers">0</h3>
      </div>
      <div style="background: #28a745; padding:20px; border-radius:10px; width:150px;">
        <p>Total Companies:</p><h3 id="totalCompanies">0</h3>
      </div>
      <div style="background: #ffc107; padding:20px; border-radius:10px; width:150px;">
        <p>Total Jobs:</p><h3 id="totalJobs">0</h3>
      </div>
    </div>

    <!-- Admin Sections -->
    <div id="adminHomeSection">
      <h3>üè† Home Content</h3>
      <p>Welcome to admin home!</p>
    </div>
    <div id="adminUsersSection" style="display:none;">
      <h3>üë• Manage Users</h3>
      <p>User management table here.</p>
    </div>
    <div id="adminJobsSection" style="display:none;">
      <h3>üìã Manage Jobs</h3>
      <p>Job management table here.</p>
    </div>
    <div id="adminSettingsSection" style="display:none;">
      <h3>‚öôÔ∏è Settings</h3>
      <p>Admin settings here.</p>
    </div>
  </div>

  <!-- ================================
       COMPANY DASHBOARD
  ================================== -->
  <div id="companyDashboard" style="display:none; padding:20px;">
    <div id="companyMenuBtn" onclick="toggleCompanyMenu()">‚ò∞</div>
    <div class="sideMenu" id="companySideMenu">
      <a href="#">Post Job</a>
      <a href="#">My Jobs</a>
      <a href="#" onclick="logout()">Logout</a>
    </div>
    <div class="overlay" id="companyOverlay" onclick="toggleCompanyMenu()"></div>
    <h2>Company Dashboard</h2><p>Welcome Company!</p>
  </div>

  <!-- ================================
       FRESHER DASHBOARD
  ================================== -->
  <div id="fresherDashboard" style="display:none; padding:20px;">
    <div id="fresherMenuBtn" onclick="toggleFresherMenu()">‚ò∞</div>
    <div class="sideMenu" id="fresherSideMenu">
      <a href="#">My Applications</a>
      <a href="#">Profile</a>
      <a href="#" onclick="logout()">Logout</a>
    </div>
    <div class="overlay" id="fresherOverlay" onclick="toggleFresherMenu()"></div>
    <h2>Fresher Dashboard</h2><p>Welcome Fresher!</p>
  </div>

  <!-- ================================
       MAIN SCRIPT
  ================================== -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";
    import { getFirestore, setDoc, doc, getDoc, collection, where, getDocs, query } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

    const firebaseConfig = { apiKey: "...", authDomain: "...", projectId: "...", storageBucket: "...", messagingSenderId: "...", appId: "..." };
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    window.signup = async function() { ... };
    window.login = async function() { ... };
    window.toggleForm = function() { ... };
    window.showDashboard = function(role) { ... };
    async function loadAdminStats() { ... };
    window.toggleAdminMenu = function() { ... };
    window.toggleCompanyMenu = function() { ... };
    window.toggleFresherMenu = function() { ... };
    window.logout = function() { ... };
    onAuthStateChanged(auth, async (user) => { ... });

    // ‚úÖ Admin menu links handler
    document.addEventListener('DOMContentLoaded', () => {
      const adminMenuLinks = [
        { id: 'adminMenuHome', section: 'home' },
        { id: 'adminMenuUsers', section: 'users' },
        { id: 'adminMenuJobs', section: 'jobs' },
        { id: 'adminMenuSettings', section: 'settings' }
      ];
      adminMenuLinks.forEach(link => {
        const el = document.getElementById(link.id);
        if (el) {
          el.addEventListener('click', (e) => {
            e.preventDefault();
            showAdminSection(link.section);
          });
        }
      });
      const toggleLink = document.getElementById('toggleLink');
      toggleLink?.addEventListener('click', (e) => { e.preventDefault(); toggleForm(); });
    });

    window.showAdminSection = function(section) {
      ['adminHomeSection','adminUsersSection','adminJobsSection','adminSettingsSection'].forEach(id => document.getElementById(id).style.display='none');
      if (section === 'home') document.getElementById('adminHomeSection').style.display = 'block';
      else if (section === 'users') document.getElementById('adminUsersSection').style.display = 'block';
      else if (section === 'jobs') document.getElementById('adminJobsSection').style.display = 'block';
      else if (section === 'settings') document.getElementById('adminSettingsSection').style.display = 'block';
      toggleAdminMenu(); // Close menu after click
    };
  </script>

</body>
</html>
